(function(u,v,w,n){function r(){var d=c.document.getElementById("searchInput").value;if(d)var b="<h2> Filtered links: &quot;"+d+"&quot;</h2>";else d="",b="<h2> Links: </h2>";b+='<div id="container"><input type="checkbox" id="checkall"><label for="checkall">All</label><br>';for(var a=0;a<g.length;a++)-1!==g[a].indexOf(d)&&(b+='<div style="display: inline-block; margin: 0;margin-left: 1em;white-space: nowrap;"><input type="checkbox"'+(h[a]?" checked":"")+' id="link'+a+'"><label for="link'+a+'"><a href="'+g[a]+'">'+g[a]+"</a></label></div><br>");c.document.getElementById("divLinks").innerHTML=b+"</div>"}function p(d,b){var a=c.document.getElementById("link"+d);a&&(a.checked=b);k+=(h[d]===b?0:1)*(b?1:-1);h[d]=b;a=c.document.getElementById("checkall");a.checked=0<k;a.indeterminate=0<k&&k<h.length}function q(){var d=0===k&&!c.document.getElementById("checkurl").checked;c.document.getElementById("toClipboard").disabled=d;c.document.getElementById("toPyload").disabled=d||0===c.document.getElementById("packagename").value.length}function x(){var d=[],b=c.document.getElementById("packagename").value,a=c.document.getElementById("serveraddr").value;c.document.getElementById("checkurl").checked&&d.push(m);for(var e=0;e<h.length;e++)h[e]&&d.push(g[e]);if(1===n)var f=t(a+"/flash/add",{name:b,urls:d.join("\n")});else 2===n?f=window.open(a+'/api/addPackage?name="'+b+'"&links='+JSON.stringify(d),"","resizable=no, location=no, width=100, height=100, menubar=no, status=no, scrollbars=no, menubar=no"):3===n&&(JSON.stringify(d),f=t(a+"/api/addPackage",{name:JSON.stringify(b),links:JSON.stringify(d),a:v,p:w}));setTimeout(function(){f.close()},1E3);c.close()}function t(d,b){var a=document.createElement("form");a.style.display="none";a.target="_Pyload";a.method="POST";a.action=d;for(var e in b)if(b.hasOwnProperty(e)){var f=document.createElement("input");f.type="text";f.name=e;f.value=b[e];a.appendChild(f)}c.document.body.appendChild(a);f=c.open("","_Pyload","resizable=no, location=no, width=100, height=100, menubar=no, status=no, scrollbars=no, menubar=no");a.submit();return f}var l=window;var c=window.open("","_blank","width=800,height=600,scrollbars,resizable,menubar");var g=function(){for(var c=[],b=l.document.links.length-1,a;a=l.document.links[b];b--)a.href.match(/^(?:mailto:|javascript:|data:)/)||0>c.indexOf(a.href)&&c.push(a.href);return c}();var h=Array.apply(null,Array(g.length)).map(Boolean.prototype.valueOf,!1);var k=0;var y=function(){for(var c=[""],b=l.document.links.length-1,a;a=l.document.links[b];b--)a.href.match(/^(?:mailto:|javascript:|data:)/)||(a=a.hostname.match(/[^.]+\.(?:\w{3,}|\w{2,3}\.\w{2})$/),null!==a&&0>c.indexOf(a[0].toLowerCase())&&c.push(a[0].toLowerCase()));return c}();var m=l.document.URL;(function(){var d=document.createElement("div"),b=document.createElement("div");b.innerHTML="Package Name: ";b.setAttribute("style","margin:18px 0;white-space:nowrap");var a=document.createElement("input");a.style.display="inline-block";a.setAttribute("id","packagename");a.setAttribute("type","text");a.setAttribute("size","70");a.setAttribute("value",l.document.title);a.setAttribute("placeholder","Package Name");a.oninput=function(){q()};b.appendChild(a);a=document.createElement("button");a.setAttribute("id","toPyload");a.setAttribute("style","display:inline-block;margin-left: 5px");a.setAttribute("disabled","");a.innerHTML="Send to pyLoad";a.onclick=function(){x()};b.appendChild(a);a=document.createElement("button");a.setAttribute("id","toClipboard");a.setAttribute("style","display:inline-block;margin-left: 5px");a.setAttribute("disabled","");a.innerHTML="&#128203;";a.setAttribute("title","Copy links to clipboard");a.onclick=function(){for(var a=c.document.getElementById("checkurl").checked?[m]:[],b=0;b<h.length;b++)h[b]&&a.push(g[b]);b=document.createElement("textarea");b.style.fontSize="12pt";b.style.border="0";b.style.padding="0";b.style.margin="0";b.style.position="absolute";b.style.left="-9999px";b.style.top=(c.pageYOffset||c.document.documentElement.scrollTop)+"px";b.setAttribute("readonly","");b.value=a.join("\n");c.document.body.appendChild(b);b.select();try{var d=c.document.execCommand("copy");c.alert("Copy "+(d?"successful":"unsuccessful"))}catch(z){c.alert("Oops, unable to copy"+z)}c.document.body.removeChild(b)};b.appendChild(a);a=document.createElement("button");a.setAttribute("id","configtoggle");a.setAttribute("style","display:inline-block;margin-left: 5px");a.innerHTML="&#9881;";a.onclick=function(){var a=c.document.getElementById("config");a.style.display="block"===a.style.display?"none":"block"};b.appendChild(a);d.appendChild(b);a=document.createElement("fieldset");a.setAttribute("id","config");a.style.display="none";b=(b="undefined"!==typeof c.Storage?c.localStorage.getItem("pyloadServer"):"")||u;a.innerHTML="<legend style='font-weight:bold;'>Configuration</legend>pyLoad's address:<input type='text' id='serveraddr' size='30' style='margin-left: 5px' placeholder='scheme://address:port' value='"+b+"'>";b=document.createElement("button");b.innerHTML="Save";b.style.cssFloat="right";b.onclick=function(){var a=c.document.getElementById("serveraddr").value;0<a.length&&(c.localStorage.setItem("pyloadServer",a),c.alert('Saved for domain "'+window.top.location.hostname+'"'))};a.append(b);d.appendChild(a);b=document.createElement("div");b.innerHTML='<br><hr style="color:lightgrey;"><h2>Page URL:</h2><div style="display: inline-block; margin: 0;white-space: nowrap;"><input type="checkbox" id="checkurl"><label for="checkurl"><a href="'+m+'">'+m+'</a></label></div><br><br><hr style="color:lightgrey;">';a=document.createElement("div");var e=document.createElement("h2");e.setAttribute("id","Filter links by keyword:");a.appendChild(e);e=document.createElement("input");e.setAttribute("id","searchInput");e.setAttribute("type","text");e.setAttribute("placeholder","Filter..");a.appendChild(e);a.innerHTML+=" or Check domain: ";var f=document.createElement("select");f.setAttribute("id","selectDomain");y.forEach(function(a){var b=document.createElement("option");b.text=a;b.onclick=function(){var a=[],b=!1;var d=c.document.getElementById("selectDomain").value;if(""!==d){var e=new RegExp("(?://|\\.)"+d.replace(".","\\.")+"(?:[?/]|$)","i");for(d=0;d<g.length;d++){var f=g[d].match(/:\/\/[^/?]+(?:[?/]|$)/g);f&&f[0].match(e)&&(a.push(d),!1===h[d]&&(b=!0))}for(d=0;d<a.length;d++)p(a[d],b);q()}};f.appendChild(b)});a.appendChild(f);e=document.createElement("div");e.setAttribute("id","divLinks");c.document.body.appendChild(d);c.document.body.appendChild(b);c.document.body.appendChild(a);c.document.body.appendChild(e);c.document.title="Send to pyLoad";c.document.getElementById("searchInput").oninput=function(){r()};c.document.addEventListener("click",function(a){if(a.target&&"checkbox"===a.target.type){if(0===a.target.id.indexOf("link")){var b=parseInt(a.target.id.replace("link",""),10);p(b,a.target.checked)}else if("checkall"===a.target.id)for(b=k<h.length,a.target.checked=b,a.target.indeterminate=!1,a=0;a<g.length;a++)p(a,b);q()}else"A"===a.target.nodeName&&a.preventDefault()});r()})()})
("http://localhost:9666","username","password",1);